.max-w-7xl.mx-auto
  / Header
  .flex.justify-between.items-center.mb-8
    %div
      %h1.text-3xl.font-bold.text-brown-black= @product.name
      .flex.items-center.gap-4.mt-2
        = link_to "← Back to Products", admin_products_path, class: "text-amber-600 hover:text-amber-700 font-medium"
        %span.text-gray-400 |
        = link_to "Edit Product", edit_admin_product_path(@product), class: "text-amber-600 hover:text-amber-700 font-medium"
    .flex.gap-3
      = link_to "Edit", edit_admin_product_path(@product), class: "bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition-colors"
      = link_to "Delete", admin_product_path(@product), method: :delete, data: { turbo_confirm: "Are you sure you want to delete this product?" }, class: "bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors"

  .grid.grid-cols-1.lg:grid-cols-2.gap-8
    / Left: Product Image
    .bg-white.rounded-lg.shadow-lg.p-6
      %h2.text-xl.font-semibold.text-brown-black.mb-4 Product Image
      - if @product.image.attached?
        = image_tag @product.image, class: "w-full h-96 object-cover rounded-lg border border-gray-200"
      - else
        .w-full.h-96.bg-gray-200.rounded-lg.flex.items-center.justify-center.border.border-gray-300
          %span.text-gray-500 No Image Available

    / Right: Product Details
    .bg-white.rounded-lg.shadow-lg.p-6
      %h2.text-xl.font-semibold.text-brown-black.mb-6 Product Details
      
      .space-y-6
        / Name
        %div
          %label.text-sm.font-medium.text-gray-600 Product Name
          %p.text-lg.text-brown-black.font-semibold= @product.name

        / Category
        %div
          %label.text-sm.font-medium.text-gray-600 Category
          %p.text-lg.text-brown-black
            - if @product.category.present?
              %span.inline-block.bg-amber-100.text-amber-800.px-3.py-1.rounded-full.text-sm.font-medium= @product.category
            - else
              %span.text-gray-400 No category assigned

        / Price
        %div
          %label.text-sm.font-medium.text-gray-600 Price
          %p.text-2xl.text-amber-600.font-bold $#{@product.price}

        / Stock
        %div
          %label.text-sm.font-medium.text-gray-600 Stock
          .flex.items-center.gap-3
            %p.text-lg.text-brown-black.font-semibold= @product.stock
            - if @product.stock < 10
              %span.inline-block.bg-red-100.text-red-800.px-3.py-1.rounded-full.text-sm.font-medium Low Stock
            - elsif @product.stock == 0
              %span.inline-block.bg-gray-100.text-gray-800.px-3.py-1.rounded-full.text-sm.font-medium Out of Stock
            - else
              %span.inline-block.bg-green-100.text-green-800.px-3.py-1.rounded-full.text-sm.font-medium In Stock

        / Description
        %div
          %label.text-sm.font-medium.text-gray-600 Description
          %p.text-brown-black.leading-relaxed= @product.description

        / Availability
        %div
          %label.text-sm.font-medium.text-gray-600 Availability
          - if @product.available?
            %span.inline-block.bg-green-100.text-green-800.px-3.py-1.rounded-full.text-sm.font-medium ✓ Available
          - else
            %span.inline-block.bg-red-100.text-red-800.px-3.py-1.rounded-full.text-sm.font-medium ✗ Not Available

        / Created/Updated
        %div.border-t.border-gray-200.pt-4
          %p.text-sm.text-gray-600
            %strong Created:
            = @product.created_at.strftime("%B %d, %Y at %I:%M %p")
          %p.text-sm.text-gray-600.mt-2
            %strong Last Updated:
            = @product.updated_at.strftime("%B %d, %Y at %I:%M %p")

  / Product Statistics
  .mt-8.bg-white.rounded-lg.shadow-lg.p-6
    %h2.text-xl.font-semibold.text-brown-black.mb-6 Product Statistics
    .grid.grid-cols-1.md:grid-cols-3.gap-6
      %div
        %p.text-sm.font-medium.text-gray-600 Total Orders
        %p.text-2xl.font-bold.text-brown-black= @product.order_items.sum(:quantity)
      %div
        %p.text-sm.font-medium.text-gray-600 Total Revenue
        %p.text-2xl.font-bold.text-green-600
          $#{@product.order_items.sum { |oi| oi.price * oi.quantity }}
      %div
        %p.text-sm.font-medium.text-gray-600 In Carts
        %p.text-2xl.font-bold.text-amber-600= @product.cart_items.sum(:quantity)
